server:
  # consul 服务发现会有1s左右延迟，所以在kratos生命周期中，
  # 服务deregister之后，不能马上停止服务，需要延迟一段时间后在停止服务，否则服务监听者还没有拉取最新服务列表，服务已经停止。
  # 因此给servers套上一个wrapper用于延迟停止服务。
  # 默认0s
  stop_delay: 0s
  # middleware
  middleware:
    metadata:
      # 这个前缀的 metadata 才会保留在请求中
      prefix:
        - x-md-
  http:
    # 服务监听地址，host:port 或者 unix文件地址。默认 0.0.0.0:8000
    addr: 0.0.0.0:8000
    # 服务超时时间（默认1s）
    timeout: 1s
    # http 路由前缀
    path_prefix:
    # metrics 路由
    metrics:
      disable: false
      path: /metrics
  grpc:
    # 服务监听地址，host:port 或者 unix文件地址。默认 0.0.0.0:8000
    addr: 0.0.0.0:9000
    # 服务超时时间（默认1s）
    timeout: 1s
  # 指定路由超时
  timeout:
    - path: /helloworld.v1.Greeter/SayHello
      timeout: 0.5s
    - prefix: /pb_package.Service
      timeout: 0.5s
    - regexp: /pb_package.Service/*
      timeout: 0.5s
